import org.bonitasoft.engine.gradle.PomUtils

dependencies {
    api(libs.commonsBeanUtils) {
        exclude(module: 'commons-collections')
    }
    api libs.commonsIO
    api "com.sun.activation:jakarta.activation:${Deps.activationVersion}"
    api libs.commonsLang
    api(group: 'com.thoughtworks.xstream', name: 'xstream', version: Deps.xstreamVersion)
    api "io.micrometer:micrometer-core:${Deps.micrometerVersion}"
    api libs.springContext
    api libs.springBootAutoconfigure
    api "org.slf4j:slf4j-api:${Deps.slf4jVersion}"
    testImplementation "junit:junit:${Deps.junit4Version}"
    testImplementation "org.junit.jupiter:junit-jupiter-api:${Deps.junit5Version}"
    testImplementation "org.assertj:assertj-core:${Deps.assertjVersion}"
    testImplementation "org.mockito:mockito-core:${Deps.mockitoVersion}"
    testImplementation "org.mockito:mockito-junit-jupiter:${Deps.mockitoVersion}"
    testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: Deps.junit5Version
    testImplementation "com.github.stefanbirkner:system-rules:${Deps.systemRulesVersion}"
    testImplementation "com.github.stefanbirkner:system-lambda:${Deps.systemLambdaVersion}"
    testImplementation "ch.qos.logback:logback-classic:${Deps.logbackVersion}"
    testRuntimeOnly group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: Deps.junit5Version
    testRuntimeOnly group: 'org.junit.vintage', name: 'junit-vintage-engine', version: Deps.junit5Version

    annotationProcessor libs.lombok
    compileOnly libs.lombok
}

description = 'Bonita Engine Util Classes'

test {
    useJUnitPlatform { includeEngines 'junit-jupiter', 'junit-vintage' }
}

tasks.register("sourcesJar", Jar) {
    from sourceSets.main.allJava
    archiveClassifier = 'sources'
}

tasks.register("javadocJar", Jar) {
    from javadoc
    archiveClassifier = 'javadoc'
}


publishing {
    publications {
        mavenJava(MavenPublication) {
            from project.components.java
            artifact project.sourcesJar
            artifact project.javadocJar
            pom { pom ->
                name = "Bonita Business Data Generator"
                description = 'Bonita Engine Util Classes'
                PomUtils.pomCommunityPublication(pom)
            }
        }
    }
}
