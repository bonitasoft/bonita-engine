plugins { id 'bonita-docker-database' }

dependencies {
    api project(':bpm:bonita-common')
    api project(':services:bonita-business-data:bonita-business-data-generator')
    api project(':services:bonita-classloader')
    api project(':services:bonita-business-data:bonita-business-data-api')
    api project(':services:bonita-resources')
    api project(':services:bonita-transaction')
    api project(':services:bonita-commons')
    api(libs.hibernateCore) {
        exclude(module: 'jboss-transaction-api_1.2_spec')
    }
    api libs.commonsLang
    api project(':services:bonita-classloader')
    annotationProcessor libs.lombok
    compileOnly libs.lombok

    testImplementation libs.junit4
    testImplementation libs.assertj
    testImplementation libs.jsonUnitFluent
    testImplementation libs.mockitoCore
    testImplementation libs.logback
    testImplementation libs.narayanaJta
    testImplementation libs.springTest
    testImplementation libs.springJdbc
    testImplementation testFixtures(project(':bpm:bonita-common'))
    testRuntimeOnly libs.tomcatDbcp
    testRuntimeOnly libs.h2
    testRuntimeOnly libs.mysql
    testRuntimeOnly libs.postgresql
    testRuntimeOnly libs.msSqlServer

    // Property Based Test framework:
    testImplementation(libs.quickcheckCore)
    testImplementation(libs.quickcheckGenerators)
}

// run:
// ./gradlew mysqlDatabaseTest
// ./gradlew oracleDatabaseTest
// ./gradlew sqlserverDatabaseTest
// ./gradlew postgresDatabaseTest
// to run tests on specific docker DB:
databaseIntegrationTest { includes '**/*Test.class' }
