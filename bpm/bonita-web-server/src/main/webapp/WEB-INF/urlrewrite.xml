<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 4.0//EN"
        "http://www.tuckey.org/res/dtds/urlrewrite4.0.dtd">

<urlrewrite>

    <!--  redirection to old api servlet  -->
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/activity([\?/]|$)</from>
        <to>/APIToolkit/bpm/activity$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/actor([\?/]|$)</from>
        <to>/APIToolkit/bpm/actor$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/actorMember([\?/]|$)</from>
        <to>/APIToolkit/bpm/actorMember$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedActivity([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedActivity$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedCase([\?]|$)</from>
        <to>/APIToolkit/bpm/archivedCase$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedCase/([^/]*)$</from>
        <to>/APIToolkit/bpm/archivedCase/$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedComment([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedComment$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedConnectorInstance([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedConnectorInstance$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archiveddocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/archiveddocument$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedFlowNode([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedFlowNode$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedHumanTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedHumanTask$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedTask$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedUserTask([\?]|$)</from>
        <to>/APIToolkit/bpm/archivedUserTask$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedUserTask/([^/]*)$</from>
        <to>/APIToolkit/bpm/archivedUserTask/$2</to>
    </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/case([\?]|$)</from>
       <to>/APIToolkit/bpm/case$2</to>
    </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/case/([^/]*)$</from>
       <to>/APIToolkit/bpm/case/$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/caseDocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/caseDocument$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/archivedCaseDocument([\?/]|$)</from>
        <to>/APIToolkit/bpm/archivedCaseDocument$2</to>
    </rule> 
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/caseVariable([\?/]|$)</from>
        <to>/APIToolkit/bpm/caseVariable$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/category([\?/]|$)</from>
        <to>/APIToolkit/bpm/category$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/comment([\?/]|$)</from>
        <to>/APIToolkit/bpm/comment$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/connectorInstance([\?/]|$)</from>
        <to>/APIToolkit/bpm/connectorInstance$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/delegation([\?/]|$)</from>
        <to>/APIToolkit/bpm/delegation$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/document([\?/]|$)</from>
        <to>/APIToolkit/bpm/document$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/flowNode([\?/]|$)</from>
        <to>/APIToolkit/bpm/flowNode$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/humanTask([\?/]|$)</from>
        <to>/APIToolkit/bpm/humanTask$2</to>
    </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/process([\?]|$)</from>
       <to>/APIToolkit/bpm/process$2</to>
   </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/process/([^/]*)$</from>
       <to>/APIToolkit/bpm/process/$2</to>
   </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/processCategory([\?/]|$)</from>
        <to>/APIToolkit/bpm/processCategory$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/processConnector([\?/]|$)</from>
        <to>/APIToolkit/bpm/processConnector$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/processConnectorDependency([\?/]|$)</from>
        <to>/APIToolkit/bpm/processConnectorDependency$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/processParameter([\?/]|$)</from>
        <to>/APIToolkit/bpm/processParameter$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/processResolutionProblem([\?/]|$)</from>
        <to>/APIToolkit/bpm/processResolutionProblem$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/bpm/task([\?/]|$)</from>
        <to>/APIToolkit/bpm/task$2</to>
    </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/userTask([\?]|$)</from>
       <to>/APIToolkit/bpm/userTask$2</to>
   </rule>
    <rule>
       <from>^(/portal/custom-page)?/API/bpm/userTask/([^/]*)$</from>
       <to>/APIToolkit/bpm/userTask/$2</to>
   </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/customuserinfo/definition([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/definition$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/customuserinfo/user([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/user$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/customuserinfo/value([\?/]|$)</from>
        <to>/APIToolkit/customuserinfo/value$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/group([\?/]|$)</from>
        <to>/APIToolkit/identity/group$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/membership([\?/]|$)</from>
        <to>/APIToolkit/identity/membership$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/personalcontactdata([\?/]|$)</from>
        <to>/APIToolkit/identity/personalcontactdata$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/professionalcontactdata([\?/]|$)</from>
        <to>/APIToolkit/identity/professionalcontactdata$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/role([\?/]|$)</from>
        <to>/APIToolkit/identity/role$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/identity/user([\?/]|$)</from>
        <to>/APIToolkit/identity/user$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/living/application-page([\?/]|$)</from>
        <to>/APIToolkit/living/application-page$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/living/application-menu([\?/]|$)</from>
        <to>/APIToolkit/living/application-menu$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/living/application([\?/]|$)</from>
        <to>/APIToolkit/living/application$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/platform/platform([\?/]|$)</from>
        <to>/APIToolkit/platform/platform$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/portal/page([\?/]|$)</from>
        <to>/APIToolkit/portal/page$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/portal/profile([\?/]|$)</from>
        <to>/APIToolkit/portal/profile$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/portal/profileMember([\?/]|$)</from>
        <to>/APIToolkit/portal/profileMember$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/system/i18nlocale([\?/]|$)</from>
        <to>/APIToolkit/system/i18nlocale$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/system/session([\?/]|$)</from>
        <to>/APIToolkit/system/session$2</to>
    </rule>
    <rule>
        <from>^(/portal/custom-page)?/API/system/tenant([\?/]|$)</from>
        <to>/APIToolkit/system/tenant$2</to>
    </rule>

    <rule>
        <note>
            Deal with custom page resources URL backward compatibility.
            Also there is a bug with qsappend="true" which always append query string
            using a &amp;.
            Therefor the ?fix=true is used to fix that issue.
        </note>
        <from>^/portal/custom-page/(.*)/pageResource$</from>
        <to qsappend="true" type="redirect">%{context-path}/portal/pageResource?fix=true</to>
    </rule>
    <rule>
        <from>^/portal/custom-page/(.*)/fileUpload$</from>
        <to>/portal/fileUpload</to>
    </rule>
    <rule>
        <from>^/portal/custom-page/(.*)/documentDownload?(.*)$</from>
        <to qsappend="true">/portal/documentDownload?$2</to>
    </rule>
    <rule>
        <from>^/portal/resource/app/([^\/]+)/([^\/]+)/content/pageResource?(.*)$</from>
        <to qsappend="true">/portal/pageResource?$3</to>
    </rule>
    <rule>
        <from>^/portal/resource/app/([^\/]+)/([^\/]+)/content/fileUpload$</from>
        <to>/portal/fileUpload</to>
    </rule>
    <rule>
        <from>^/portal/resource/app/([^\/]+)/([^\/]+)/content/documentDownload?(.*)$</from>
        <to qsappend="true">/portal/documentDownload?$3</to>
    </rule>

    <!-- support home URL from versions prior to 7.13 -->
    <rule>
        <from>^/portal/homepage</from>
        <to>/apps/appDirectoryBonita</to>
    </rule>

</urlrewrite>
